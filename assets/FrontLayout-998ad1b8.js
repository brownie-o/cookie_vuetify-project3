import B from"./RegisterView-bc53505d.js";import A from"./LoginView-bdaffcff.js";import{_ as q,u as D,c as v,a as $,l as z,b as G,r as w,d as J,o as a,e as K,f as l,w as e,g as s,h as i,i as o,F as O,V as d,j as p,k as V,m as I,p as Q,n as T,q as f,s as W}from"./index-70f49df9.js";import{V as X,a as Y,b as Z}from"./VNavigationDrawer-cdd5494f.js";import{V as m,a as ee}from"./VRow-7449ef9b.js";import{V as c,a as P,b as oe}from"./VList-c3167f17.js";import"./_commonjsHelpers-de833af9.js";import"./index.esm-b55ccfe2.js";import"./VForm-d29a6ccc.js";const te=""+new URL("../favicon.ico",import.meta.url).href;const _=k=>(Q("data-v-131041db"),k=k(),T(),k),ae=_(()=>f("span",null,"Home",-1)),le=_(()=>f("span",null,"Login",-1)),se=_(()=>f("span",null,"Register",-1)),ie=_(()=>f("span",null,"Main",-1)),ne=_(()=>f("span",null,"Profile",-1)),re=_(()=>f("span",null,"Friends",-1)),ce={__name:"FrontLayout",setup(k){const{xs:L}=D(),{md:R}=D(),{sm:U}=D(),E=v(()=>L.value);v(()=>R.value),v(()=>U.value);const{apiAuth:N}=W(),S=$(),C=z(),t=G(),b=w(0),h=w(!1),g=w(!1),F=()=>{if(L.value)return"center";if(!L.value)return"bottom"},y=()=>{g.value=!1,h.value=!1},M=async()=>{var x,r;try{await N.delete("/users/logout"),t.logout(),C({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:F(),rounded:"pill",variant:"tonal"}}),S.push("/")}catch(u){console.log(u);const n=((r=(x=u==null?void 0:u.response)==null?void 0:x.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";C({text:n,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:F(),rounded:"pill",variant:"tonal"}})}},j=v(()=>{switch(b.value){case 0:return"#F2E8DC";case 1:return"#8FA9BF";case 2:return"#D9D9D9";default:return"blue-grey"}}),H=v(()=>`https://source.boringavatars.com/beam/120/${t.account}?colors=907363,BFAE9F,D9CDBF,F2E8DC,8FA9BF`);return(x,r)=>{const u=J("router-view");return a(),K(O,null,[E.value?(a(),l(X,{key:0,modelValue:b.value,"onUpdate:modelValue":r[1]||(r[1]=n=>b.value=n),"bg-color":j.value,mode:"shift",style:{height:"56px"}},{default:e(()=>[o(ee,{justify:"center"},{default:e(()=>[i(t).isLogin?s("",!0):(a(),l(m,{key:0,class:"center",cols:"4"},{default:e(()=>[o(d,{block:"",to:"/"},{default:e(()=>[o(p,{icon:"mdi-home"}),ae]),_:1})]),_:1})),i(t).isLogin?s("",!0):(a(),l(m,{key:1,class:"center",cols:"4"},{default:e(()=>[o(V,{"max-width":"448"},{activator:e(({props:n})=>[o(d,I(n,{block:""}),{default:e(()=>[o(p,{icon:"mdi-login"}),le]),_:2},1040)]),default:e(({isActive:n})=>[o(A,{onCloseDialog:y})]),_:1})]),_:1})),i(t).isLogin?s("",!0):(a(),l(m,{key:2,class:"center",cols:"4"},{default:e(()=>[o(V,{"max-width":"448",modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=n=>g.value=n)},{activator:e(({props:n})=>[o(d,I(n,{block:""}),{default:e(()=>[o(p,{icon:"mdi-account-plus"}),se]),_:2},1040)]),default:e(({isActive:n})=>[o(B,{onCloseDialog:y})]),_:1},8,["modelValue"])]),_:1})),i(t).isLogin?(a(),l(m,{key:3,class:"center",cols:"4"},{default:e(()=>[o(d,{block:"",to:"/main"},{default:e(()=>[o(p,{icon:"mdi-timer-play-outline"}),ie]),_:1})]),_:1})):s("",!0),i(t).isLogin?(a(),l(m,{key:4,class:"center",cols:"4"},{default:e(()=>[o(d,{block:"",to:"/profile"},{default:e(()=>[o(p,{icon:"mdi-account-circle"}),ne]),_:1})]),_:1})):s("",!0),i(t).isLogin?(a(),l(m,{key:5,class:"center",cols:"4"},{default:e(()=>[o(d,{block:"",to:"/friends"},{default:e(()=>[o(p,{icon:"mdi-account-star"}),re]),_:1})]),_:1})):s("",!0)]),_:1})]),_:1},8,["modelValue","bg-color"])):s("",!0),i(t).isLogin?(a(),l(Y,{key:1,"expand-on-hover":"",rail:"",color:"#F2E8DC"},{default:e(()=>[o(P,null,{default:e(()=>[i(t).isLogin?(a(),l(c,{key:0,"prepend-avatar":H.value,title:i(t).name,to:"/main",style:{color:"#403D3C"},active:!1},null,8,["prepend-avatar","title"])):s("",!0),i(t).isLogin?s("",!0):(a(),l(c,{key:1,"prepend-avatar":te,title:"Cookie Project",to:"/",style:{color:"#403D3C"},active:!1}))]),_:1}),o(oe),o(P,{density:"compact",nav:""},{default:e(()=>[i(t).isLogin?s("",!0):(a(),l(c,{key:0,class:"textcolor","prepend-icon":"mdi-home",to:"/",title:"Home",active:!1})),i(t).isLogin?s("",!0):(a(),l(c,{key:1,class:"textcolor","prepend-icon":"mdi-login",to:"/",title:"Login",active:!1},{default:e(()=>[o(V,{modelValue:h.value,"onUpdate:modelValue":r[2]||(r[2]=n=>h.value=n),activator:"parent","max-width":"448"},{default:e(()=>[o(A,{onCloseDialog:y})]),_:1},8,["modelValue"])]),_:1})),i(t).isLogin?s("",!0):(a(),l(c,{key:2,class:"textcolor","prepend-icon":"mdi-account-plus",to:"/",title:"Register",active:!1},{default:e(()=>[o(V,{modelValue:g.value,"onUpdate:modelValue":r[3]||(r[3]=n=>g.value=n),activator:"parent","max-width":"448"},{default:e(()=>[o(B,{onCloseDialog:y})]),_:1},8,["modelValue"])]),_:1})),i(t).isLogin?(a(),l(c,{key:3,class:"textcolor","prepend-icon":"mdi-timer-play-outline",to:"/main",title:"Main",active:!1})):s("",!0),i(t).isLogin?(a(),l(c,{key:4,class:"textcolor","prepend-icon":"mdi-account-circle",to:"/profile",title:"Profile"})):s("",!0),i(t).isLogin?(a(),l(c,{key:5,class:"textcolor","prepend-icon":"mdi-account-star",to:"/friends",title:"Friends"})):s("",!0),i(t).isLogin?(a(),l(c,{key:6,class:"textcolor","prepend-icon":"mdi-logout",title:"Logout",onClick:M})):s("",!0)]),_:1})]),_:1})):s("",!0),o(Z,null,{default:e(()=>[o(u)]),_:1})],64)}}},ye=q(ce,[["__scopeId","data-v-131041db"]]);export{ye as default};
